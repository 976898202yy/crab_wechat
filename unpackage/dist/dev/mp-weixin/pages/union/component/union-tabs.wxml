<view class="union-tabs"><u-tabs vue-id="189c025f-1" list="{{tabs}}" current="{{current}}" activeStyle="{{({color:'#1A7CF9 ',fontWeight:'bold',fontSize:'28rpx'})}}" inactiveStyle="{{({color:'#858E9A',fontSize:'28rpx'})}}" itemStyle="height: 48px;" data-event-opts="{{[['^change',[['tabChange']]]]}}" bind:change="__e" bind:__l="__l"></u-tabs><block wx:if="{{current==0}}"><view class="monitor"><block wx:if="{{videoList}}"><view class="d-flex center"><view data-event-opts="{{[['tap',[['last',['$event']]]]]}}" class="arrow" style="margin-right:6px;" bindtap="__e"><u-icon vue-id="189c025f-2" name="arrow-left" color="#999" size="18" bind:__l="__l"></u-icon></view><video style="width:100%;height:204px;border-radius:4px;" id="myVideo" src="{{videoSrc}}" autoplay="autoplay" object-fit="fill" auto-pause-if-open-native="{{true}}"></video><view data-event-opts="{{[['tap',[['next',['$event']]]]]}}" class="arrow" style="margin-left:6px;" bindtap="__e"><u-icon vue-id="189c025f-3" name="arrow-right" color="#999" size="18" bind:__l="__l"></u-icon></view></view></block><block wx:if="{{!videoList}}"><view><u-empty vue-id="189c025f-4" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无摄像头" bind:__l="__l"></u-empty></view></block><u-tabs vue-id="189c025f-5" list="{{dataControlTabs}}" current="{{controlCurrent}}" scrollable="{{false}}" activeStyle="{{({color:'#333333',fontWeight:'bold',fontSize:'32rpx'})}}" inactiveStyle="{{({color:'#858E9A',fontWeight:'bold',fontSize:'32rpx'})}}" itemStyle="flex: initial;height: 48px;padding: 0 16px;" data-event-opts="{{[['^change',[['dataChange']]]]}}" bind:change="__e" bind:__l="__l"></u-tabs><view><block wx:if="{{controlCurrent==0}}"><view class="tab-box d-flex"><block wx:for="{{environmentList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="box-item environment"><view class="d-flex env-data"><view><image style="width:25px;height:31px;" src="{{item.icon}}" mode="aspectFit"></image></view><view class="evn-name">{{item.dataTypeName}}</view></view><view style="font-size:32rpx;color:#1A7CF9;font-weight:bolder;">{{item.value+item.unit}}</view></view></block></view></block><block wx:if="{{$root.g0}}"><view><u-empty vue-id="189c025f-6" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无数据" bind:__l="__l"></u-empty></view></block></view><view><block wx:if="{{controlCurrent==1}}"><view class="tab-box d-flex"><block wx:for="{{deviceList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="box-item control"><image style="width:50px;height:58px;" src="{{item.icon}}" mode="aspectFit"></image><view class="control-name">{{item.deviceName}}</view><view class="d-flex" style="justify-content:space-between;width:170rpx;"><u-switch style="margin-left:4px;" vue-id="{{'189c025f-7-'+i}}" activeColor="#5ac725" size="16" value="{{item.status}}" data-event-opts="{{[['^change',[['deviceChange']]],['^input',[['__set_model',['$0','status','$event',[]],[[['deviceList','',i]]]],['deviceInput',['$0'],[[['deviceList','',i,'deviceId']]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-switch><view style="font-size:28rpx;">{{item.mode}}</view></view></view></block></view></block><block wx:if="{{!deviceList&&controlCurrent==1}}"><view><u-empty vue-id="189c025f-8" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无设备" bind:__l="__l"></u-empty></view></block></view></view></block><block wx:if="{{current==1}}"><view class="strategy"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="box"><view class="box-item strategy-item"><view class="d-flex space-between" style="margin-bottom:20px;"><view class="equ-name">{{"设备："+item.$orig.deviceName}}</view><u-switch style="margin-left:4px;" vue-id="{{'189c025f-9-'+i}}" activeColor="#07C160" size="26" value="{{item.$orig.isOn}}" data-event-opts="{{[['^change',[['strategyChange',['$0'],[[['strategyList','',i,'deviceId']]]]]],['^input',[['__set_model',['$0','isOn','$event',[]],[[['strategyList','',i]]]],['strategyInput']]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-switch></view><view class="conditions"><view class="conditions-list d-flex"><view class="nowrap" style="color:#999999;width:70px;">开启条件：</view><view><u-button vue-id="{{'189c025f-10-'+i}}" text="增加" size="mini" type="info" data-event-opts="{{[['^click',[['toStrategyForm',['开启','$0'],[[['strategyList','',i,'deviceId']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view><block wx:for="{{item.$orig.openList}}" wx:for-item="val" wx:for-index="index" wx:key="index"><view class="conditions-list d-flex"><view class="nowrap" style="margin-left:70px;">{{val.condition}}</view><view><block wx:if="{{item.g1>0}}"><u-button vue-id="{{'189c025f-11-'+i+'-'+index}}" text="删除" size="mini" type="error" data-event-opts="{{[['^click',[['delOpen',['$0','$1',index],[[['strategyList','',i],['openList','',index,'logicId']],[['strategyList','',i]]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></block></view></view></block></view><view class="conditions"><view class="conditions-list d-flex"><view class="nowrap" style="color:#999999;width:70px;">关闭条件：</view><view><u-button vue-id="{{'189c025f-12-'+i}}" text="增加" size="mini" type="info" data-event-opts="{{[['^click',[['toStrategyForm',['关闭','$0'],[[['strategyList','',i,'deviceId']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view><block wx:for="{{item.$orig.closeList}}" wx:for-item="val" wx:for-index="index" wx:key="index"><view class="conditions-list d-flex"><view class="nowrap" style="margin-left:70px;">{{val.condition}}</view><view><block wx:if="{{item.g2>0}}"><u-button vue-id="{{'189c025f-13-'+i+'-'+index}}" text="删除" size="mini" type="error" data-event-opts="{{[['^click',[['delClose',['$0','$1',index],[[['strategyList','',i],['closeList','',index,'logicId']],[['strategyList','',i]]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></block></view></view></block></view></view></view></block><block wx:if="{{$root.g3==0}}"><view><u-empty vue-id="189c025f-14" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无策略信息" marginTop="140" bind:__l="__l"></u-empty></view></block></view></block><block wx:if="{{current==2}}"><view class="inspection"><block wx:for="{{inspectionList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="box"><view class="box-item-2"><view class="d-flex space-between"><view>{{"设备："+item.deviceName}}</view><view class="d-flex"><u-button vue-id="{{'189c025f-15-'+i}}" text="修改" size="mini" type="primary" customStyle="margin-right: 10px;" data-event-opts="{{[['^click',[['openModal',['$0','$1','$2'],[[['inspectionList','',i,'id']],[['inspectionList','',i,'deviceId']],[['inspectionList','',i,'status']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button><u-button vue-id="{{'189c025f-16-'+i}}" color="{{item.status==0?'#f56c6c':'#1AA034'}}" text="{{item.status==0?'关闭':'开启'}}" size="mini" type="error" data-event-opts="{{[['^click',[['updatePollStatus',['$0','$1','$2'],[[['inspectionList','',i,'id']],[['inspectionList','',i,'deviceId']],[['inspectionList','',i,'status']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view><view class="d-flex space-between" style="margin-top:26px;"><view style="font-size:28rpx;"><text style="color:#999999;margin-right:10px;">巡检周期</text><text>{{!item.pollingPeriod?'无':item.pollingPeriod+'小时'}}</text></view><view class="{{[item.status==0?'blue':'grey']}}">{{item.statusName}}</view></view></view></view></block><block wx:if="{{$root.g4==0}}"><view><u-empty vue-id="189c025f-17" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无策略信息" marginTop="140" bind:__l="__l"></u-empty></view></block></view></block><block wx:if="{{current==3}}"><view class="set"><block wx:if="{{$root.g5>0}}"><scroll-view style="height:73vh;" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{alarmSetList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="box"><view class="box-item-2"><view></view><view class="d-flex space-between"><view>{{item.sensorTypeName}}</view><view class="d-flex"><u-button vue-id="{{'189c025f-18-'+i}}" text="修改" size="mini" type="primary" customStyle="margin-right: 10px;" data-event-opts="{{[['^click',[['openSet',['$0'],[[['alarmSetList','',i,'id']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button><u-button vue-id="{{'189c025f-19-'+i}}" color="{{item.state==0?'#1AA034':'#F9AE3D'}}" text="{{item.state==0?'开启':'关闭'}}" size="mini" type="error" customStyle="margin-right: 10px;" data-event-opts="{{[['^click',[['updateSetStatus',['$0','$1'],[[['alarmSetList','',i,'id']],[['alarmSetList','',i,'state']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button><u-button vue-id="{{'189c025f-20-'+i}}" text="删除" size="mini" type="error" data-event-opts="{{[['^click',[['delSet',['$0',i],[[['alarmSetList','',i,'id']]]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view><view class="d-flex space-between" style="margin-top:26px;"><view style="font-size:28rpx;"><text style="color:#999999;margin-right:10px;">报警值下限</text><text>{{item.min+item.unit}}</text></view><view style="font-size:28rpx;"><text style="color:#999999;margin-right:10px;">报警值上限</text><text>{{item.max+item.unit}}</text></view><view class="{{[item.state==0?'blue':'grey']}}">{{item.statusName}}</view></view></view></view></block><block wx:if="{{$root.g6>9}}"><u-loadmore vue-id="189c025f-21" status="{{status}}" loading-text="努力加载中" loadmore-text="轻轻上拉" nomore-text="没有更多了" line="{{true}}" bind:__l="__l"></u-loadmore></block></scroll-view></block><view class="set-btn"><u-button vue-id="189c025f-22" type="primary" shape="circle" text="增加" customStyle="width:75%" data-event-opts="{{[['^click',[['toSetForm',['$0','$1'],['site','pond']]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view><block wx:if="{{$root.g7==0}}"><view><u-empty vue-id="189c025f-23" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无告警设置" marginTop="140" bind:__l="__l"></u-empty></view></block></view></block><block wx:if="{{current==4}}"><view class="log"><view class="log-list-top d-flex"><view style="width:30%;">告警时间</view><view style="width:30%;">告警类型</view><view style="width:30%;">所属塘口</view></view><view class="log-list-content"><block wx:if="{{$root.g8>0}}"><scroll-view style="height:65vh;" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{alarmList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['warnDetail',['$0'],[[['alarmList','',i,'warningId']]]]]]]}}" class="log-list-item d-flex" bindtap="__e"><view class="hide" style="width:30%;">{{item.warningTime}}</view><view class="hide" style="width:40%;">{{item.warningType}}</view><view class="hide" style="width:30%;">{{item.pondName}}</view></view></block><block wx:if="{{$root.g9>9}}"><u-loadmore vue-id="189c025f-24" status="{{status}}" loading-text="努力加载中" loadmore-text="上拉加载更多" nomore-text="没有更多了" line="{{true}}" bind:__l="__l"></u-loadmore></block></scroll-view></block><block wx:if="{{$root.g10==0}}"><view><u-empty vue-id="189c025f-25" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无告警记录" bind:__l="__l"></u-empty></view></block></view></view></block><block wx:if="{{current==5}}"><view class="log"><view class="log-list"><block wx:if="{{$root.g11>0}}"><scroll-view style="height:73vh;" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{tableList}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['logDetail',['$0'],[[['tableList','',i,'id']]]]]]]}}" class="list-item" bindtap="__e"><view><text class="left">设备名称：</text><text class="right">{{item.deviceName}}</text></view><view><text class="left">操作类型：</text><text class="right">{{item.operationName}}</text></view><view><text class="left">操作结果：</text><text class="{{['right',item.result=='成功'?'':'red']}}">{{item.result}}</text></view><view><text class="left">操作时间：</text><text class="right">{{item.operateTime}}</text></view><view class="bottom-right">{{"操作人："+item.username}}</view></view></block><block wx:if="{{$root.g12>9}}"><u-loadmore vue-id="189c025f-26" status="{{status}}" loading-text="努力加载中" loadmore-text="轻轻上拉" nomore-text="没有更多了" line="{{true}}" bind:__l="__l"></u-loadmore></block></scroll-view></block><block wx:if="{{$root.g13==0}}"><view><u-empty vue-id="189c025f-27" mode="data" icon="http://cdn.uviewui.com/uview/empty/data.png" text="暂无日志" bind:__l="__l"></u-empty></view></block></view></view></block><u-modal vue-id="189c025f-28" show="{{showModal}}" showCancelButton="{{true}}" closeOnClickOverlay="{{true}}" confirmText="修改" data-event-opts="{{[['^confirm',[['pollConfirm']]],['^cancel',[['e0']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="slot-content"><u--form vue-id="{{('189c025f-29')+','+('189c025f-28')}}" labelPosition="left" mode="{{inspectionForm}}" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('189c025f-30')+','+('189c025f-29')}}" labelWidth="90" label="巡检周期:" prop="pollingPeriod" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('189c025f-31')+','+('189c025f-30')}}" type="number" border="none" placeholder="请输入巡检周期" value="{{inspectionForm.pollingPeriod}}" data-event-opts="{{[['^input',[['__set_model',['$0','pollingPeriod','$event',[]],['inspectionForm']]]]]}}" bind:__l="__l" vue-slots="{{['suffix']}}"><u--text vue-id="{{('189c025f-32')+','+('189c025f-31')}}" slot="suffix" text="小时" type="tips" bind:__l="__l"></u--text></u-input></u-form-item></u--form></view></u-modal><u-modal vue-id="189c025f-33" show="{{showSet}}" showCancelButton="{{true}}" closeOnClickOverlay="{{true}}" confirmText="修改" data-event-opts="{{[['^confirm',[['setConfirm']]],['^cancel',[['e1']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="slot-content"><u--form vue-id="{{('189c025f-34')+','+('189c025f-33')}}" labelPosition="left" mode="{{setForm}}" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('189c025f-35')+','+('189c025f-34')}}" labelWidth="90" label="报警值上限:" prop="max" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('189c025f-36')+','+('189c025f-35')}}" type="number" border="none" placeholder="请输入报警值上限" value="{{setForm.max}}" data-event-opts="{{[['^input',[['__set_model',['$0','max','$event',[]],['setForm']]]]]}}" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('189c025f-37')+','+('189c025f-34')}}" labelWidth="90" label="报警值下限:" prop="min" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('189c025f-38')+','+('189c025f-37')}}" type="number" border="none" placeholder="请输入报警值下限" value="{{setForm.min}}" data-event-opts="{{[['^input',[['__set_model',['$0','min','$event',[]],['setForm']]]]]}}" bind:__l="__l"></u-input></u-form-item></u--form></view></u-modal></view>